CC      	= gcc
RM      	= rm
MKDIR   	= mkdir
HTTPGET 	= curl
TAR     	= tar

VENDOR_DIR 	= vendor

VERSION 	= 0.0.1

SRCDIR 		= "src"
TESTDIR 	= "test"
SOURCES		= $(shell ls ${SRCDIR}/*.c)
OBJECTS		= $(SOURCES:.c=.o)
LIBS            = -l ev -l cunit
MAIN            = wabi
MAIN_TEST       = wabi_test


TESTS	        = $(shell ls ${TESTDIR}/*.c)
TEST_OBJECTS	= $(TESTS:.c=.o)

CFLAGS  = -Wall -foptimize-sibling-calls -O2 $(INCLUDES) $(LIBS)

all: $(MAIN)

$(MAIN): %(OBJECTS)
	$(CC) $(CFLAGS) $(INCLUDES) -o $(MAIN) $(OBJECTS) $(LFLAGS) $(LIBS)

clean:
	-$(RM) $(OBJECTS) $(TEST_OBJECTS) $(MAIN)

distclean: clean
	-$(RM) $(VENDOR_DIR)

.PHONY: all clean distclean run test
